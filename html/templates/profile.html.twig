{% extends 'base.html.twig' %}

{% block title %}Log in!{% endblock %}

{% block body %}


</br>
</br>
</br>
</br>
</br>
</br>
{% if is_granted('IS_AUTHENTICATED_FULLY') %}



    <h1 class="h1">Track your rising star!</h1>

<form action="{{ path('app_profile') }}" method="post">
    <div class="">
        <div><br/></div>
        <div><br/></div>

        <div class="">
            <p>What is the name of your story, and the genre you want to track?</p>
            <div class="input-group mb-3 form-group-1">
                <input type="text" id="storyName" class="form-control" placeholder="Story Name" aria-label="Story Name">
                <span class="input-group-text">found under</span>
                <select id="trackedGenres" class="form-select" aria-label="Select Your Genre">
                    <option selected>Select Your Genre</option>
                    <option value="action">Action</option>
                    <option value="adventure">Adventure</option>
                    <option value="comedy">Comedy</option>
                    <option value="contemporary">Contemporary</option>
                    <option value="drama">Drama</option>
                    <option value="fantasy">Fantasy</option>
                    <option value="historical">Historical</option>
                    <option value="horror">Horror</option>
                    <option value="mystery">Mystery</option>
                    <option value="psychological">Psychological</option>
                    <option value="romance">Romance</option>
                    <option value="satire">Satire</option>
                    <option value="sci_fi">Sci-fi</option>
                    <option value="one_shot">Short Story</option>
                    <option value="tragedy">Tragedy</option>
                </select>
            </div>
        </div>
    </div>

    
    <div><br/></div>
    <div><br/></div>

    <div class=" text-center mb-3">
        <div class="">
            <p class="card-title p-3">That's all we need, hit submit below to start tracking!</p>
            <button type="submit" class="btn btn-primary">Submit</button>
        </div>
        
    <div><br/></div>
    </div>

</form>





{% else %}
<div class="card text-center">
  <div class="card-header">

<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active" id="pills-home-tab" data-bs-toggle="pill" data-bs-target="#pills-home" type="button" role="tab" aria-controls="pills-home" aria-selected="true">Login</button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link" id="pills-profile-tab" data-bs-toggle="pill" data-bs-target="#pills-profile" type="button" role="tab" aria-controls="pills-profile" aria-selected="false">Register</button>
    </li>
</ul>

</div>

<div class="tab-content" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab" tabindex="0">
  
<div class="card">
<div class="card-body">

    {% if error %}
        <div>{{ error.messageKey|trans(error.messageData, 'security') }}</div>
    {% endif %}
    
    <form action="{{ path('app_profile') }}" method="post">
        <h1 class="h3 mb-3 font-weight-normal">Please sign in</h1>
        <label for="username">Email Address</label>
        <input type="text" value="{{ last_username }}" name="_username" id="username" class="form-control" autocomplete="username" required autofocus>
        <label for="password">Password</label>
        <input type="password" name="_password" id="password" class="form-control" autocomplete="current-password" required>

        <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

        <button class="btn btn-lg btn-primary" type="submit">
            Sign in
        </button>
    </form>

</div>
</div>
  </div>
  <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab" tabindex="0">
  
    {% for flash_error in app.flashes('verify_email_error') %}
        <div class="alert alert-danger" role="alert">{{ flash_error }}</div>
    {% endfor %}

    <h1>Please Register an Account</h1>

    {{ form_errors(registrationForm) }}

    {{ form_start(registrationForm) }}
        {{ form_row(registrationForm.username) }}
        {{ form_row(registrationForm.plainPassword, {
            label: 'Password'
        }) }}
        {{ form_row(registrationForm.agreeTerms) }}

        <button type="submit" class="btn">Register</button>
    {{ form_end(registrationForm) }}


  </div>
</div>

</div>
</div>



{% endif %}




{% endblock %}




   {# {% for item in data %}
        {% if item.applied_jobs|length > 1 %}
        <p><strong>{{item.full_name}}</strong>: 
            {% for job in item.applied_jobs %}
                {{job}}{% if loop.last != true %},{% endif%}
            {% endfor %}
        </p>
        {% endif %}
    {% endfor %} #}